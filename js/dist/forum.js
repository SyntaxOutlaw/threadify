/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={24(t,e,r){var n=r(163),o=r(110),a=r(996),u=r(312),i=r(166),s=r(766),l=r(760);function c(){"use strict";var e=o(),r=e.m(c),f=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function d(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))}var p={throw:1,return:2,break:3,continue:3};function v(t){var e,r;return function(n){e||(e={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(t,e){return r(n.a,p[t],e)},delegateYield:function(t,o,a){return e.resultName=o,r(n.d,l(t),a)},finish:function(t){return r(n.f,t)}},r=function(t,r,o){n.p=e.prev,n.n=e.next;try{return t(r,o)}finally{e.next=n.n}}),e.resultName&&(e[e.resultName]=n.v,e.resultName=void 0),e.sent=n.v,e.next=n.n;try{return t.call(this,e)}finally{n.p=e.prev,n.n=e.next}}}return(t.exports=c=function(){return{wrap:function(t,r,n,o){return e.w(v(t),r,n,o&&o.reverse())},isGeneratorFunction:d,mark:e.m,awrap:function(t,e){return new n(t,e)},AsyncIterator:i,async:function(t,e,r,n,o){return(d(e)?u:a)(v(t),e,r,n,o)},keys:s,values:l}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports},110(t,e,r){var n=r(397);function o(){var e,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function s(t,o,a,u){var i=o&&o.prototype instanceof c?o:c,s=Object.create(i.prototype);return n(s,"_invoke",function(t,n,o){var a,u,i,s=0,c=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,u=0,i=e,d.n=r,l}};function p(t,n){for(u=t,i=n,r=0;!f&&s&&!o&&r<c.length;r++){var o,a=c[r],p=d.p,v=a[2];t>3?(o=v===n)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=t<2&&p<a[1])?(u=0,d.v=n,d.n=a[1]):p<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,d.n=v,u=0))}if(o||t>1)return l;throw f=!0,n}return function(o,c,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,v),u=c,i=v;(r=u<2?e:i)||!f;){a||(u?u<3?(u>1&&(d.n=-1),p(u,i)):d.n=i:d.v=i);try{if(s=2,a){if(u||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,u<2&&(u=0)}else 1===u&&(r=a.return)&&r.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((r=(f=d.n<0)?i:t.call(n,d))!==l)break}catch(t){a=e,u=1,i=t}finally{s=1}}return{value:r,done:f}}}(t,a,u),!0),s}var l={};function c(){}function f(){}function d(){}r=Object.getPrototypeOf;var p=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),v=d.prototype=c.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,n(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=d,n(v,"constructor",d),n(d,"constructor",f),f.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,u,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(t.exports=o=function(){return{w:s,m}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},163(t){t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},166(t,e,r){var n=r(163),o=r(397);t.exports=function t(e,r){function a(t,o,u,i){try{var s=e[t](o),l=s.value;return l instanceof n?r.resolve(l.v).then(function(t){a("next",t,u,i)},function(t){a("throw",t,u,i)}):r.resolve(l).then(function(t){s.value=t,u(s)},function(t){return a("throw",t,u,i)})}catch(t){i(t)}}var u;this.next||(o(t.prototype),o(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(t,e,n){function o(){return new r(function(e,r){a(t,n,e,r)})}return u=u?u.then(o,o):o()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},183(t,e,r){var n=r(24)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},312(t,e,r){var n=r(110),o=r(166);t.exports=function(t,e,r,a,u){return new o(n().w(t,e,r,a),u||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},397(t){function e(r,n,o,a){var u=Object.defineProperty;try{u({},"",{})}catch(r){u=0}t.exports=e=function(t,r,n,o){function a(r,n){e(t,r,function(t){return this._invoke(r,n,t)})}r?u?u(t,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[r]=n:(a("next",0),a("throw",1),a("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n,o,a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},735(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},760(t,e,r){var n=r(735).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(n(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},766(t){t.exports=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},996(t,e,r){var n=r(312);t.exports=function(t,e,r,o,a){var u=n(t,e,r,o,a);return u.next().then(function(t){return t.done?t.value:u.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=r.n(t);const n=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/DiscussionPage"];var a=r.n(o);const u=flarum.core.compat["forum/components/DiscussionListItem"];var i=r.n(u);const s=flarum.core.compat["forum/components/Post"];var l=r.n(s);const c=flarum.core.compat["forum/components/ReplyComposer"];var f=r.n(c);function d(t,e,r,n,o,a,u){try{var i=t[a](u),s=i.value}catch(t){return void r(t)}i.done?e(s):Promise.resolve(s).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function u(t){d(a,n,o,u,i,"next",t)}function i(t){d(a,n,o,u,i,"throw",t)}u(void 0)})}}var v=r(183),h=r.n(v);const y=flarum.core.compat["forum/components/PostStream"];var b=r.n(y);function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var g=new Map;function w(t){if(null==t)return null;var e=Number(t);return Number.isFinite(e)&&e>0?String(e):null}function N(t,r){void 0===r&&(r={});var n=w(t);if(!n)return Promise.resolve();var o=Date.now(),a=g.get(n);if(a||(a={map:new Map,inflight:null,ts:0},g.set(n,a)),!r.force&&o-a.ts<1e4)return a.inflight||Promise.resolve();if(a.inflight&&!r.force)return a.inflight;var u=o;return a.inflight=e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/discussions/"+n+"/threads-order?bust="+u}).then(function(t){for(var e,r=new Map,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return x(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}((null==t?void 0:t.order)||[]);!(e=o()).done;){var u=e.value,i=u.postId,s=u.order,l=u.depth,c=u.parentPostId;r.set(Number(i),{order:Number(s),depth:Number.isFinite(l)?Number(l):0,parentId:c?Number(c):null})}a.map=r,a.ts=Date.now();try{window.dispatchEvent(new CustomEvent("threadify:order-ready",{detail:{discussionId:Number(n)}}))}catch(t){}}).catch(function(t){console.warn("[Threadify] order prefetch failed",t)}).finally(function(){a.inflight=null}),a.inflight}function _(t,e){var r=S(t),n=null==r?void 0:r.get(Number(e));return null==n?void 0:n.depth}function S(t){var e=w(t);if(e){var r=g.get(e);return null==r?void 0:r.map}}function M(t){return P.apply(this,arguments)}function P(){return(P=p(h().mark(function t(e){var r,n,o,a;return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=w(e)){t.next=1;break}return t.abrupt("return",new Map);case 1:if(n=Date.now(),(o=g.get(r))||(o={map:new Map,inflight:null,ts:0},g.set(r,o)),!(n-o.ts<1e4&&o.map.size>=0)){t.next=2;break}return t.abrupt("return",o.map);case 2:return a=o.inflight||N(r),t.next=3,a;case 3:return t.abrupt("return",S(r)||new Map);case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function k(t){var e=w(t);if(e){var r=g.get(e);r&&(r.ts=0)}}function O(t){var e=Number(t);return Number.isFinite(e)?Math.max(0,Math.min(10,e)):0}function I(t){if(!t||"function"!=typeof t.id)return 0;try{var r,n=null==t.discussion?void 0:t.discussion(),o=null!=(r=null==n||null==n.id?void 0:n.id())?r:null;if(null!=o){var a=_(o,t.id());if(Number.isInteger(a))return O(a)}}catch(t){}return function(t){for(var r=0,n=0,o=new Set,a=t;a&&n<100;){var u=a.attribute("parent_id");if(!u)break;if(o.has(u)){console.warn("[Threadify] cycle detected while walking parents of",null==t||null==t.id?void 0:t.id()),r=0;break}o.add(u),r+=1;var i=e().store.getById("posts",String(u));if(!i)break;if(a=i,n++,r>=10)break}return O(r)}(t)}function T(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var j=1e7,E=!1;function L(){if(!E){E=!0;try{requestAnimationFrame(function(){E=!1,"object"==typeof m&&"function"==typeof m.redraw&&m.redraw()})}catch(t){E=!1}}}function F(t){return 1===(null==t?void 0:t.nodeType)&&t.matches(".PostStream-item[data-id]")}function D(t){var e=Array.from((null==t?void 0:t.children)||[]);if(!e.length)return{posts:[],anchor:null};var r=e.findIndex(F);if(r<0)return{posts:[],anchor:e[0]||null};var n=e.length-1-[].concat(e).reverse().findIndex(F);return n<r&&(n=r),{posts:e.slice(r,n+1).filter(F),anchor:e[n+1]||null}}function q(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function G(t){try{return e().store.getById("posts",String(t))}catch(t){return null}}function C(t){try{var e=null==t||null==t.number?void 0:t.number();return Number.isFinite(e)?e:null}catch(t){return null}}function z(t){try{var e=null==t||null==t.createdAt?void 0:t.createdAt();return e instanceof Date?+e:null}catch(t){return null}}function R(t,e){var r,n,o=function(t){try{var e;if(!t)return null;if("function"==typeof t.contentType)return t.contentType();if("function"==typeof t.attribute)return null!=(e=t.attribute("contentType"))?e:null}catch(t){}return null}(e);return!(!o||"comment"===o)||!!(null!=t&&null!=(r=t.classList)&&r.contains("EventPost")||null!=t&&null!=(n=t.classList)&&n.contains("Post-event"))||!(null==t||null==t.querySelector||!t.querySelector(".EventPost, .Post-event, .EventPost-icon"))}function B(t,e,r){if(t&&Number.isFinite(t.order))return Number(t.order);var n=C(e);if(null!=n)return n;var o=z(e);return null!=o?j/2+o:j+Number(r)}function U(t,e){var r=z(t);if(null!=r)return r;var n=C(t);return null!=n?j/2+n:j+Number(e)}function $(t,e){for(var r,n=new Set(t.map(function(t){return Number(t.dataset.id)})),o=new Map(t.map(function(t){return[Number(t.dataset.id),G(Number(t.dataset.id))]})),a=new Map,u=T(t);!(r=u()).done;){var i=r.value,s=Number(i.dataset.id),l=e.get(s),c=o.get(s),f=l?l.parentId:null==c||null==c.attribute?void 0:c.attribute("parent_id");a.set(s,null==f?null:Number(f))}for(var d,p=new Set,v=T(t);!(d=v()).done;){var m=d.value,h=Number(m.dataset.id);R(m,o.get(h))&&p.add(h)}for(var y,b=new Set,x=T(t);!(y=x()).done;){var g=y.value,w=Number(g.dataset.id);p.has(w)||null==a.get(w)&&b.add(w)}for(var N=!0;N;){N=!1;for(var _,S=T(t);!(_=S()).done;){var M=_.value,P=Number(M.dataset.id);if(!b.has(P)&&!p.has(P)){var k=a.get(P);null!=k&&n.has(k)&&b.has(k)&&(b.add(P),N=!0)}}}return{eligible:b,events:p,models:o,parentOf:a,present:n}}function V(t,e,r,n,o){for(var a,u=t.filter(function(t){return e.has(Number(t.dataset.id))}),i=u.slice().sort(function(t,e){var r=Number(t.dataset.id),a=Number(e.dataset.id),u=B(n.get(r),o.get(r),r),i=B(n.get(a),o.get(a),a);return u===i?r-a:u-i}),s=[],l=0,c=T(t);!(a=c()).done;){var f=a.value,d=Number(f.dataset.id);s.push(e.has(d)?i[l++]:f)}for(var p,v=s.filter(function(t){return!r.has(Number(t.dataset.id))}),m=t.filter(function(t){return r.has(Number(t.dataset.id))}).sort(function(t,e){var r=Number(t.dataset.id),n=Number(e.dataset.id),a=U(o.get(r),r),u=U(o.get(n),n);return a===u?r-n:a-u}),h=v.slice(),y=function(t){return U(o.get(Number(t.dataset.id)),Number(t.dataset.id))},b=T(m);!(p=b()).done;){for(var x=p.value,g=Number(x.dataset.id),w=U(o.get(g),g),N=-1,_=0;_<h.length;_++)if(y(h[_])>w){N=_;break}-1===N?h.push(x):h.splice(N,0,x)}return h}function Y(t,e,r,n,o){var a=t.map(function(t){return Number(t.dataset.id)}),u=new Set(a),i=new Set(a.filter(function(t){return!r.has(t)&&!e.has(t)}));if(!i.size)return t;function s(t){for(var e=t,r=0;r<100;r++){var n=o.get(e);if(null==n)return null;if(!u.has(n))return null;if(i.has(n))return n;e=n}return null}for(var l,c=new Map,f=T(i);!(l=f()).done;){var d=l.value,p=s(d);null!=p&&p!==d&&(c.has(p)||c.set(p,new Set),c.get(p).add(d))}if(!c.size)return t;for(var v,m=t.slice(),h=new Map(m.map(function(t,e){return[Number(t.dataset.id),e]})),y=function(){var t=v.value,e=m.findIndex(function(e){return Number(e.dataset.id)===t});if(e<0)return 1;var r=function(t){for(var e=new Set(t),r=[],n=0;n<m.length;n++){var o=Number(m[n].dataset.id);e.has(o)&&(r.push(m[n]),m.splice(n,1),n--)}return r}(Array.from(c.get(t)).sort(function(t,e){var r=U(n.get(t),t),o=U(n.get(e),e);return r===o?t-e:r-o}));m.splice.apply(m,[e+1,0].concat(r))},b=T(Array.from(c.keys()).sort(function(t,e){return h.get(t)-h.get(e)}));!(v=b()).done;)y();return m}function H(t,e){var r=Array.from(t.querySelectorAll(".PostStream-item[data-id]"));if(!r.length)return!1;var n=new Map(r.map(function(t){return[Number(t.dataset.id),G(Number(t.dataset.id))]}));function o(t,e,r){var n=t.querySelector(".Post")||t,o=[];return n.classList.forEach(function(t){/^(thread-(root|ed-post|depth-\d+|deep|very-deep))$/.test(t)&&o.push(t)}),o.forEach(function(t){return n.classList.remove(t)}),r?(n.classList.add("thread-root"),!0):(e>0?(n.classList.add("threaded-post","thread-depth-"+Math.min(e,10)),e>=3&&n.classList.add("thread-deep"),e>=5&&n.classList.add("thread-very-deep")):n.classList.add("thread-root"),!0)}for(var a=!1,u=0,i=r;u<i.length;u++){var s=i[u],l=Number(s.dataset.id),c=n.get(l),f=R(s,c);a=o(s,f?0:I(c),f)||a}return a}function J(t,e){return K.apply(this,arguments)}function K(){return(K=p(h().mark(function t(e,r){var n,o,a,u,i,s,l,c,f,d,p,v,m,y,b,x,g,w,N;return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,M(r);case 1:if(N=t.sent){t.next=2;break}N=new Map;case 2:if(n=N,o=D(e),(a=o.posts).length){t.next=3;break}return t.abrupt("return");case 3:if(u=$(a,n),i=u.eligible,s=u.events,l=u.models,c=u.parentOf,f=V(a,i,s,n,l),d=Y(f,i,s,l,c),p=!q(a,d)){m=D(e),y=(null==(v=m.anchor)?void 0:v.parentNode)===e?m.anchor:null;try{for(b=T(d);!(x=b()).done;)g=x.value,y&&y.parentNode===e?e.insertBefore(g,y):e.appendChild(g)}catch(t){console.warn("[Threadify] reorder failed (will retry)",t)}}w=H(e),(p||w)&&L();case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}e().initializers.add("syntaxoutlaw-threadify",function(){(0,n.extend)(f().prototype,"data",function(t){var e=function(t){if(!t||"string"!=typeof t)return null;var e=t.match(/@"[^"]*"#p(\d+)/);if(null!=e&&e[1]){var r=parseInt(e[1],10);if(!isNaN(r)&&r>0)return r}return null}(t.content);return e&&(t.parent_id=e),t}),(0,n.extend)(l().prototype,"elementAttrs",function(t){var e,r=this.attrs.post;if(r){var n=null==r.discussion?void 0:r.discussion(),o=null!=(e=null==n||null==n.id?void 0:n.id())?e:null;if(o){var a=_(o,r.id());if(Number.isInteger(a)&&a>0){var u=Math.min(a,10),i=["threaded-post","thread-depth-"+u];u>=3&&i.push("thread-deep"),u>=5&&i.push("thread-very-deep"),t.className=(t.className||"")+" "+i.join(" ")}}}}),function(){(0,n.extend)(b().prototype,"oncreate",function(){var t,e,r,n=function(t){try{var e,r;return null!=(e=null==t||null==(r=t.stream)||null==(r=r.discussion)||null==r.id?void 0:r.id())?e:null}catch(t){return null}}(this),o=null!=(t=this)&&null!=(e=t.element)&&null!=(e=e.classList)&&e.contains("PostStream")?t.element:(null==t||null==(r=t.element)||null==r.querySelector?void 0:r.querySelector(".PostStream"))||document.querySelector(".PostStream")||null;if(n&&o){J(o,n);var a=!1,u=null,i=null,s=new MutationObserver(function(t){var e=t.filter(function(t){return"childList"===t.type}).flatMap(function(t){return Array.from(t.addedNodes||[])}).filter(function(t){return 1===(null==t?void 0:t.nodeType)&&(null==t.matches?void 0:t.matches(".PostStream-item[data-id]"))});if(e.length){if(a)return;return u&&clearTimeout(u),void(u=setTimeout(p(h().mark(function t(){var r,u,i;return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=!0,t.prev=1,t.next=2,M(n);case 2:if(u=t.sent){t.next=3;break}u=new Map;case 3:if(r=u,!e.some(function(t){return!r.has(Number(t.dataset.id))})){t.next=4;break}return k(n),t.next=4,N(n,{force:!0});case 4:return t.next=5,J(o,n);case 5:t.next=7;break;case 6:t.prev=6,i=t.catch(1),console.warn("[Threadify] realtime reorder failed",i);case 7:return t.prev=7,a=!1,t.finish(7);case 8:case"end":return t.stop()}},t,null,[[1,6,7,8]])})),16))}if(t.some(function(t){if("attributes"!==t.type)return!1;var e=t.target;if(null==e||null==e.matches||!e.matches(".PostStream-item"))return!1;if("data-id"===t.attributeName)return!!e.getAttribute("data-id");if("class"===t.attributeName){var r=t.oldValue||"",n=e.className||"";return/PostStream-item/.test(n)&&/Post--saving/.test(r)&&!/Post--saving/.test(n)}return!1})){if(a)return;return u&&clearTimeout(u),void(u=setTimeout(p(h().mark(function t(){var e,r;return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=!0,t.prev=1,k(n),t.next=2,N(n,{force:!0});case 2:return t.next=3,J(o,n);case 3:e=0,i&&clearInterval(i),i=setInterval(p(h().mark(function t(){return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e++,t.next=1,M(n);case 1:if(t.sent){t.next=2;break}new Map;case 2:(H(o)||e>=10)&&(i&&clearInterval(i),L());case 3:case"end":return t.stop()}},t)})),150),t.next=5;break;case 4:t.prev=4,r=t.catch(1),console.warn("[Threadify] hydration reorder failed",r);case 5:return t.prev=5,a=!1,t.finish(5);case 6:case"end":return t.stop()}},t,null,[[1,4,5,6]])})),16))}});s.observe(o,{childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["data-id","class"],subtree:!0}),this.__threadifyDomObserver=s}}),(0,n.extend)(b().prototype,"onremove",function(){if(this.__threadifyDomObserver){try{this.__threadifyDomObserver.disconnect()}catch(t){}this.__threadifyDomObserver=void 0}});try{window.addEventListener("threadify:order-ready",function(){return L()})}catch(t){}}(),(0,n.extend)(a().prototype,"oninit",function(){var t=this.discussion&&"function"==typeof this.discussion.id&&this.discussion.id()||this.discussion&&this.discussion.id||null;t&&N(t)}),(0,n.extend)(i().prototype,"oncreate",function(){var t=this.attrs.discussion;if(t){var e=t.id(),r=function(){return N(e)};this.element&&(this.element.addEventListener("mouseenter",r,{once:!0}),this.element.addEventListener("touchstart",r,{once:!0,passive:!0}))}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map