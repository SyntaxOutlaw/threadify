/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={24:(t,e,r)=>{var n=r(163),o=r(110),i=r(996),u=r(312),a=r(166),s=r(766),c=r(760);function l(){"use strict";var e=o(),r=e.m(l),f=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function d(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))}var p={throw:1,return:2,break:3,continue:3};function v(t){var e,r;return function(n){e||(e={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(t,e){return r(n.a,p[t],e)},delegateYield:function(t,o,i){return e.resultName=o,r(n.d,c(t),i)},finish:function(t){return r(n.f,t)}},r=function(t,r,o){n.p=e.prev,n.n=e.next;try{return t(r,o)}finally{e.next=n.n}}),e.resultName&&(e[e.resultName]=n.v,e.resultName=void 0),e.sent=n.v,e.next=n.n;try{return t.call(this,e)}finally{n.p=e.prev,n.n=e.next}}}return(t.exports=l=function(){return{wrap:function(t,r,n,o){return e.w(v(t),r,n,o&&o.reverse())},isGeneratorFunction:d,mark:e.m,awrap:function(t,e){return new n(t,e)},AsyncIterator:a,async:function(t,e,r,n,o){return(d(e)?u:i)(v(t),e,r,n,o)},keys:s,values:c}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},110:(t,e,r)=>{var n=r(397);function o(){var e,r,i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function s(t,o,i,u){var a=o&&o.prototype instanceof l?o:l,s=Object.create(a.prototype);return n(s,"_invoke",function(t,n,o){var i,u,a,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return i=t,u=0,a=e,d.n=r,c}};function p(t,n){for(u=t,a=n,r=0;!f&&s&&!o&&r<l.length;r++){var o,i=l[r],p=d.p,v=i[2];t>3?(o=v===n)&&(a=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(u=0,d.v=n,d.n=i[1]):p<v&&(o=t<3||i[0]>n||n>v)&&(i[4]=t,i[5]=n,d.n=v,u=0))}if(o||t>1)return c;throw f=!0,n}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,v),u=l,a=v;(r=u<2?e:a)||!f;){i||(u?u<3?(u>1&&(d.n=-1),p(u,a)):d.n=a:d.v=a);try{if(s=2,i){if(u||(o="next"),r=i[o]){if(!(r=r.call(i,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,u<2&&(u=0)}else 1===u&&(r=i.return)&&r.call(i),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((r=(f=d.n<0)?a:t.call(n,d))!==c)break}catch(t){i=e,u=1,a=t}finally{s=1}}return{value:r,done:f}}}(t,i,u),!0),s}var c={};function l(){}function f(){}function d(){}r=Object.getPrototypeOf;var p=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),v=d.prototype=l.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,n(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=d,n(v,"constructor",d),n(d,"constructor",f),f.displayName="GeneratorFunction",n(d,a,"GeneratorFunction"),n(v),n(v,a,"Generator"),n(v,u,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(t.exports=o=function(){return{w:s,m:h}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},163:t=>{t.exports=function(t,e){this.v=t,this.k=e},t.exports.__esModule=!0,t.exports.default=t.exports},166:(t,e,r)=>{var n=r(163),o=r(397);t.exports=function t(e,r){function i(t,o,u,a){try{var s=e[t](o),c=s.value;return c instanceof n?r.resolve(c.v).then(function(t){i("next",t,u,a)},function(t){i("throw",t,u,a)}):r.resolve(c).then(function(t){s.value=t,u(s)},function(t){return i("throw",t,u,a)})}catch(t){a(t)}}var u;this.next||(o(t.prototype),o(t.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(t,e,n){function o(){return new r(function(e,r){i(t,n,e,r)})}return u=u?u.then(o,o):o()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,r)=>{var n=r(24)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},312:(t,e,r)=>{var n=r(110),o=r(166);t.exports=function(t,e,r,i,u){return new o(n().w(t,e,r,i),u||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},397:t=>{function e(r,n,o,i){var u=Object.defineProperty;try{u({},"",{})}catch(r){u=0}t.exports=e=function(t,r,n,o){function i(r,n){e(t,r,function(t){return this._invoke(r,n,t)})}r?u?u(t,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[r]=n:(i("next",0),i("throw",1),i("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n,o,i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},760:(t,e,r)=>{var n=r(735).default;t.exports=function(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(n(t)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},766:t=>{t.exports=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},t.exports.__esModule=!0,t.exports.default=t.exports},996:(t,e,r)=>{var n=r(312);t.exports=function(t,e,r,o,i){var u=n(t,e,r,o,i);return u.next().then(function(t){return t.done?t.value:u.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=r.n(t);const n=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/DiscussionPage"];var i=r.n(o);const u=flarum.core.compat["forum/components/DiscussionListItem"];var a=r.n(u);const s=flarum.core.compat["forum/components/Post"];var c=r.n(s),l=new Map;function f(t){if(!t)return null;var e=t.discussion&&t.discussion(),r=e&&e.id&&e.id();if(!r)return null;var n=function(t,e){var r=l.get(Number(t));if(r)return r.map.get(Number(e))}(r,t.id());return n?{depth:n.depth,threadPath:null,isRoot:!n.parentId,childCount:0,descendantCount:0,rootPostId:null}:null}var d=new Map;function p(t,e){void 0===e&&(e={});var r=b(t);if(!r)return Promise.resolve();var n=Date.now(),o=d.get(r)||{map:new Map,inflight:null,ts:0};if(d.set(r,o),!e.force&&n-o.ts<1e4)return o.inflight||Promise.resolve();if(o.inflight&&!e.force)return o.inflight;var i=n;return o.inflight=app.request({method:"GET",url:app.forum.attribute("apiUrl")+"/discussions/"+r+"/threads-order?bust="+i}).then(function(t){var e=new Map;(t&&t.order?t.order:[]).forEach(function(t){var r=t.postId,n=t.order,o=t.depth,i=t.parentPostId;r=Number(r),e.set(r,{order:Number(n),depth:Number.isFinite(o)?Number(o):0,parentId:i?Number(i):null})}),o.map=e,o.ts=Date.now();try{window.dispatchEvent(new CustomEvent("threadify:order-ready",{detail:{discussionId:Number(r)}}))}catch(t){}}).catch(function(t){console.warn("[Threadify] order prefetch failed",t)}).finally(function(){o.inflight=null}),o.inflight}function v(t){var e=b(t);if(e){var r=d.get(e);return r?r.map:void 0}}function h(t){var e=b(t);if(!e)return Promise.resolve(new Map);var r=Date.now(),n=d.get(e)||{map:new Map,inflight:null,ts:0};return d.set(e,n),r-n.ts<1e4&&n.map&&n.map.size>=0?Promise.resolve(n.map):(n.inflight||p(e)).then(function(){return v(e)||new Map})}function y(t){var e=b(t);if(e){var r=d.get(e);r&&(r.ts=0)}}function b(t){if(null==t)return null;var e=Number(t);return Number.isFinite(e)&&e>0?String(e):null}function g(t){var e=Number(t);return Number.isFinite(e)?Math.max(0,Math.min(10,e)):0}function x(t){var e,r,n,o,i=function(t){if(!t||"function"!=typeof t.id)return 0;try{var e=t.discussion&&"function"==typeof t.discussion&&t.discussion()&&t.discussion().id&&t.discussion().id()||null;if(null!=e){var r=(n=e,o=t.id(),(u=(i=v(n))&&i.get(Number(o)))?u.depth:void 0);if(Number.isInteger(r))return g(r)}}catch(t){}var n,o,i,u;try{var a=f(t);if(a&&Number.isInteger(a.depth))return g(a.depth)}catch(t){}return function(t){for(var e=0,r=0,n=new Set,o=t;o&&r<100;){var i=o.attribute?o.attribute("parent_id"):null;if(!i)break;if(n.has(i)){console.warn("[Threadify] cycle detected while walking parents of",t&&t.id&&t.id()),e=0;break}n.add(i),e+=1;var u=app.store.getById("posts",String(i));if(!u)break;if(o=u,r++,e>=10)break}return g(e)}(t)}(t),u=[];i>0?(u.push("threaded-post"),u.push("thread-depth-"+i),i>=3&&u.push("thread-deep"),i>=5&&u.push("thread-very-deep")):u.push("thread-root");try{var a=t.discussion&&"function"==typeof t.discussion&&t.discussion()&&t.discussion().id&&t.discussion().id()||null,s=null!=a?(e=a,r=t.id(),(o=(n=v(e))&&n.get(Number(r)))?o.parentId:void 0):void 0,c=f(t);(null==s?!t.attribute||!t.attribute("parent_id"):null==s)&&u.push("thread-root-confirmed"),c&&Number.isInteger(c.childCount)&&c.childCount>0&&u.push("has-children","child-count-"+Math.min(c.childCount,10)),c&&Number.isInteger(c.descendantCount)&&c.descendantCount>0&&u.push("has-descendants")}catch(t){}return u}const w=flarum.core.compat["forum/components/ReplyComposer"];var N=r.n(w);function _(t,e,r,n,o,i,u){try{var a=t[i](u),s=a.value}catch(t){return void r(t)}a.done?e(s):Promise.resolve(s).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){_(i,n,o,u,a,"next",t)}function a(t){_(i,n,o,u,a,"throw",t)}u(void 0)})}}var O=r(183),P=r.n(O);const M=flarum.core.compat["forum/components/PostStream"];var T=r.n(M);function I(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return k(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var j=1e7,A=!1;function E(){if(!A){A=!0;try{requestAnimationFrame(function(){A=!1,"function"==typeof m&&"function"==typeof m.redraw&&m.redraw()})}catch(t){A=!1}}}function F(t){try{var e,r;return null!=(e=null==t||null==(r=t.stream)||null==(r=r.discussion)||null==r.id?void 0:r.id())?e:null}catch(t){return null}}function C(t){var e,r;return null!=t&&null!=(e=t.element)&&null!=(e=e.classList)&&e.contains("PostStream")?t.element:(null==t||null==(r=t.element)||null==r.querySelector?void 0:r.querySelector(".PostStream"))||document.querySelector(".PostStream")||null}function D(t){return t&&1===t.nodeType&&t.matches(".PostStream-item[data-id]")}function L(t){var e=Array.from((null==t?void 0:t.children)||[]);if(!e.length)return{posts:[],anchor:null};var r=e.findIndex(D);if(r<0)return{posts:[],anchor:e[0]||null};var n=e.length-1-[].concat(e).reverse().findIndex(D);return n<r&&(n=r),{posts:e.slice(r,n+1).filter(D),anchor:e[n+1]||null}}function G(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function q(t){try{return e().store.getById("posts",String(t))}catch(t){return null}}function R(t){try{var e=t&&"function"==typeof t.number?t.number():null;return Number.isFinite(e)?e:null}catch(t){return null}}function z(t){try{var e=t&&"function"==typeof t.createdAt?t.createdAt():null;return e instanceof Date?e.getTime():null}catch(t){return null}}function B(t,e){var r,n,o=function(t){try{var e;if(!t)return null;if("function"==typeof t.contentType)return t.contentType();if("function"==typeof t.attribute)return null!=(e=t.attribute("contentType"))?e:null}catch(t){}return null}(e);return!(!o||"comment"===o)||!!(null!=t&&null!=(r=t.classList)&&r.contains("EventPost")||null!=t&&null!=(n=t.classList)&&n.contains("Post-event"))||!(null==t||null==t.querySelector||!t.querySelector(".EventPost, .Post-event, .EventPost-icon"))}function U(t,e,r){if(t&&Number.isFinite(t.order))return Number(t.order);var n=R(e);if(null!=n)return n;var o=z(e);return null!=o?j/2+o:j+Number(r)}function V(t,e){var r=z(t);if(null!=r)return r;var n=R(t);return null!=n?j/2+n:j+Number(e)}function Y(t,e){for(var r,n=new Set(t.map(function(t){return Number(t.dataset.id)})),o=new Map(t.map(function(t){return[Number(t.dataset.id),q(Number(t.dataset.id))]})),i=new Map,u=I(t);!(r=u()).done;){var a=r.value,s=Number(a.dataset.id),c=e.get(s),l=o.get(s),f=c?c.parentId:null!=l&&l.attribute?l.attribute("parent_id"):null;i.set(s,null==f?null:Number(f))}for(var d,p=new Set,v=I(t);!(d=v()).done;){var h=d.value,m=Number(h.dataset.id);B(h,o.get(m))&&p.add(m)}for(var y,b=new Set,g=I(t);!(y=g()).done;){var x=y.value,w=Number(x.dataset.id);p.has(w)||null==i.get(w)&&b.add(w)}for(var N=!0;N;){N=!1;for(var _,S=I(t);!(_=S()).done;){var O=_.value,P=Number(O.dataset.id);if(!b.has(P)&&!p.has(P)){var M=i.get(P);null!=M&&n.has(M)&&b.has(M)&&(b.add(P),N=!0)}}}return{eligible:b,events:p,models:o,parentOf:i,present:n}}function $(t,e,r,n,o){for(var i,u=t.filter(function(t){return e.has(Number(t.dataset.id))}),a=u.slice().sort(function(t,e){var r=Number(t.dataset.id),i=Number(e.dataset.id),u=U(n.get(r),o.get(r),r),a=U(n.get(i),o.get(i),i);return u===a?r-i:u-a}),s=[],c=0,l=I(t);!(i=l()).done;){var f=i.value,d=Number(f.dataset.id);e.has(d)?s.push(a[c++]):s.push(f)}var p=s.filter(function(t){return!r.has(Number(t.dataset.id))}),v=t.filter(function(t){return r.has(Number(t.dataset.id))});function h(t){var e=Number(t.dataset.id);return V(o.get(e),e)}v.sort(function(t,e){var r=Number(t.dataset.id),n=Number(e.dataset.id),i=V(o.get(r),r),u=V(o.get(n),n);return i===u?r-n:i-u});for(var m,y=p.slice(),b=I(v);!(m=b()).done;){for(var g=m.value,x=Number(g.dataset.id),w=V(o.get(x),x),N=-1,_=0;_<y.length;_++)if(h(y[_])>w){N=_;break}-1===N?y.push(g):y.splice(N,0,g)}return y}function H(t,e,r,n,o){var i=t.map(function(t){return Number(t.dataset.id)}),u=new Set(i),a=new Set(i.filter(function(t){return!r.has(t)&&!e.has(t)}));if(!a.size)return t;function s(t){for(var e=t,r=0;r<100;r++){var n=o.get(e);if(null==n)return null;if(!u.has(n))return null;if(a.has(n))return n;e=n}return null}for(var c,l=new Map,f=I(a);!(c=f()).done;){var d=c.value,p=s(d);null!=p&&p!==d&&(l.has(p)||l.set(p,new Set),l.get(p).add(d))}if(!l.size)return t;for(var v,h=new Map(t.map(function(t,e){return[Number(t.dataset.id),e]})),m=Array.from(l.keys()).sort(function(t,e){return h.get(t)-h.get(e)}),y=(new Map(t.map(function(t){return[Number(t.dataset.id),t]})),t.slice()),b=function(){var t=v.value,e=y.findIndex(function(e){return Number(e.dataset.id)===t});if(e<0)return 1;var r=Array.from(l.get(t));r.sort(function(t,e){var r=V(n.get(t),t),o=V(n.get(e),e);return r===o?t-e:r-o});var o=function(t){for(var e=new Set(t),r=[],n=0;n<y.length;n++){var o=Number(y[n].dataset.id);e.has(o)&&(r.push(y[n]),y.splice(n,1),n--)}return r}(r);y.splice.apply(y,[e+1,0].concat(o))},g=I(m);!(v=g()).done;)b();return y}function J(t,e){return K.apply(this,arguments)}function K(){return(K=S(P().mark(function t(e,r){var n,o,i,u,a,s,c,l,f,d,p,v,m,y,b,g;return P().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,h(r);case 1:if(g=t.sent){t.next=2;break}g=new Map;case 2:if(n=g,o=L(e),(i=o.posts).length){t.next=3;break}return t.abrupt("return");case 3:if(u=Y(i,n),a=u.eligible,s=u.events,c=u.models,l=u.parentOf,f=$(i,a,s,n,c),d=H(f,a,s,c,l),!G(i,d)){t.next=4;break}return t.abrupt("return");case 4:p=L(e),v=p.anchor&&p.anchor.parentNode===e?p.anchor:null;try{for(m=I(d);!(y=m()).done;)b=y.value,v&&v.parentNode===e?e.insertBefore(b,v):e.appendChild(b)}catch(t){console.warn("[Threadify] reorder failed (will retry)",t)}E();case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){var t="threadify:logs",e=["log","info","warn","debug","error"];window.__threadifyConsoleOriginal||(window.__threadifyConsoleOriginal={},e.forEach(function(t){window.__threadifyConsoleOriginal[t]=console[t]?console[t].bind(console):function(){}}));var r="1"===("undefined"!=typeof localStorage?localStorage.getItem(t):null);function n(e){r=!!e,"undefined"!=typeof localStorage&&localStorage.setItem(t,r?"1":"0")}window.threadifyLogs={enable:function(){return n(!0),"Threadify logs: ON"},disable:function(){return n(!1),"Threadify logs: OFF"},toggle:function(){return n(!r),"Threadify logs: "+(r?"ON":"OFF")},status:function(){return r}},e.forEach(function(t){var e=window.__threadifyConsoleOriginal[t];console[t]=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=n&&n[0];if("string"!=typeof i||0!==i.indexOf("[Threadify]")||r)return e.apply(void 0,n)}})}(),e().initializers.add("syntaxoutlaw-threadify",function(){(0,n.extend)(N().prototype,"data",function(t){var e=function(t){if(!t||"string"!=typeof t)return null;var e=t.match(/@"[^"]*"#p(\d+)/);if(e&&e[1]){var r=parseInt(e[1],10);if(!isNaN(r)&&r>0)return r}return null}(t.content);return e&&(t.parent_id=e,console.log("[Threadify] Reply threading to post",e)),t}),(0,n.extend)(c().prototype,"classes",function(t){var e=this.attrs.post;if(!e)return console.warn("[Threadify] No post in ThreadedPost.classes"),t;var r=x(e);return console.log("[Threadify] Adding classes to post "+e.id()+": "+r.join(", ")),r.forEach(function(e){t.push(e)}),t}),function(){(0,n.extend)(T().prototype,"oncreate",function(){var t=F(this),e=C(this);if(t&&e){J(e,t);var r=!1,n=!1,o=null,i=new MutationObserver(function(i){var u=i.filter(function(t){return"childList"===t.type}).flatMap(function(t){return Array.from(t.addedNodes||[])}).filter(function(t){return t&&1===t.nodeType&&t.matches&&t.matches(".PostStream-item[data-id]")});if(u.length){if(n)return;return clearTimeout(o),void(o=setTimeout(S(P().mark(function r(){var o,i,a;return P().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=!0,r.prev=1,r.next=2,h(t);case 2:if(i=r.sent){r.next=3;break}i=new Map;case 3:if(o=i,!u.some(function(t){return!o.has(Number(t.dataset.id))})){r.next=4;break}return y(t),r.next=4,p(t,{force:!0});case 4:return r.next=5,J(e,t);case 5:r.next=7;break;case 6:r.prev=6,a=r.catch(1),console.warn("[Threadify] realtime reorder failed",a);case 7:return r.prev=7,n=!1,r.finish(7);case 8:case"end":return r.stop()}},r,null,[[1,6,7,8]])})),16))}if(i.filter(function(t){return"attributes"===t.type}).some(function(t){var e=t.target;if(!e||!e.matches||!e.matches(".PostStream-item"))return!1;if("data-id"===t.attributeName)return!!e.getAttribute("data-id");if("class"===t.attributeName){var r=e.className||"";return/PostStream-item/.test(r)&&/Post--saving/.test(t.oldValue||"")&&!/Post--saving/.test(r)}return!1})){if(n)return;return clearTimeout(o),void(o=setTimeout(S(P().mark(function r(){var o;return P().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=!0,r.prev=1,y(t),r.next=2,p(t,{force:!0});case 2:return r.next=3,J(e,t);case 3:r.next=5;break;case 4:r.prev=4,o=r.catch(1),console.warn("[Threadify] hydration reorder failed",o);case 5:return r.prev=5,n=!1,r.finish(5);case 6:case"end":return r.stop()}},r,null,[[1,4,5,6]])})),16))}r||(r=!0,requestAnimationFrame(function(){r=!1,J(e,t)}))});i.observe(e,{childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["data-id","class"],subtree:!0}),this.__threadifyDomObserver=i}}),(0,n.extend)(T().prototype,"onupdate",function(){var t=F(this),e=C(this);t&&e&&J(e,t)}),(0,n.extend)(T().prototype,"onremove",function(){if(this.__threadifyDomObserver){try{this.__threadifyDomObserver.disconnect()}catch(t){}this.__threadifyDomObserver=null}});try{window.addEventListener("threadify:order-ready",function(){return E()})}catch(t){}}(),(0,n.extend)(i().prototype,"oninit",function(){var t=this.discussion&&"function"==typeof this.discussion.id&&this.discussion.id()||this.discussion&&this.discussion.id||null;t&&p(t)}),(0,n.extend)(a().prototype,"oncreate",function(){var t=this.attrs.discussion;if(t){var e=t.id(),r=function(){return p(e)};this.element&&(this.element.addEventListener("mouseenter",r,{once:!0}),this.element.addEventListener("touchstart",r,{once:!0,passive:!0}))}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map